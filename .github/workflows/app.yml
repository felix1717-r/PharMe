name: App

on:
  push:
    paths:
      - '.github/workflows/app.yml'
      - 'app/**'

defaults:
  run:
    working-directory: ./app

env:
  JAVA_VERSION: 12.x
  FLUTTER_CHANNEL: stable
  FLUTTER_VERSION: 3.0.3

jobs:
  drive:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v1
    - uses: subosito/flutter-action@v1
      with:
        channel: 'beta'
    - run: |
           flutter create --platforms=windows .
           flutter pub run build_runner build
           flutter config --enable-windows-desktop
           flutter test -d windows integration_test/faq_test.dart
  # build:
  #   runs-on: macos-latest
  #   steps:
  #     - name: Checkout code
  #       uses: actions/checkout@v3

  #     - name: Install Flutter
  #       uses: subosito/flutter-action@v2
  #       with:
  #         flutter-version: '3.0.3'
  #         channel: 'stable'
  #     - run: flutter build apk

  #     - name: Install dependencies
  #       run: flutter pub get

  #     - name: Run integration tests
  #       uses: reactivecircus/android-emulator-runner@v1
  #       with:
  #         api-level: 31
  #         script: flutter test integration_test
  # lint:
  #   name: Lint
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: actions/setup-java@v1
  #       with:
  #         java-version: ${{ env.JAVA_VERSION }}
  #     - uses: subosito/flutter-action@v1
  #       with:
  #         channel: ${{ env.FLUTTER_CHANNEL }}
  #         flutter-version: ${{ env.FLUTTER_VERSION }}
  #     - run: flutter pub get
  #     - run: flutter pub run build_runner build
  #     - run: flutter analyze
      
  
  # build-android:
  #   name: Build Android APK
  #   needs: [lint]
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: actions/setup-java@v1
  #       with:
  #         java-version: ${{ env.JAVA_VERSION }}
  #     - uses: subosito/flutter-action@v1
  #       with:
  #         channel: ${{ env.FLUTTER_CHANNEL }}
  #         flutter-version: ${{ env.FLUTTER_VERSION }}
  #     - run: flutter pub get
  #     - run: flutter pub run build_runner build
  #     - run: flutter build apk

  # build-ios:
  #   name: Build iOS Package & Test
  #   needs: [lint]
  #   runs-on: macos-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: actions/setup-java@v1
  #       with:
  #         java-version: ${{ env.JAVA_VERSION }}
  #     - uses: subosito/flutter-action@v1
  #       with:
  #         channel: ${{ env.FLUTTER_CHANNEL }}
  #         flutter-version: ${{ env.FLUTTER_VERSION }}
  #     - run: flutter pub get
  #     - run: flutter pub run build_runner build
  #     - run: flutter build ios --release --no-codesign
